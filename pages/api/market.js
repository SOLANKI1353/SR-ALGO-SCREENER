const prisma = require('../../lib/prisma'); export default async function handler(req,res){ try{ const rec = await prisma.apiKey.findFirst({where:{name:'angel'}}); if(rec && rec.key){ return res.json({ok:true, live:true, data:{symbols:[]}, note:'Live placeholder - integrate SmartAPI with rec.key'}); } else { return res.json({ok:true, demo:true, data:{symbols:[{symbol:'RELIANCE',price:2460,change:0.6},{symbol:'TCS',price:3500,change:-0.2}]}}); } } catch(e){ console.error(e); res.status(500).json({ok:false,error:e.message}); } }
