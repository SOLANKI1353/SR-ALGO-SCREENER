import {useState,useEffect} from 'react'; export default function Settings(){ const [key,setKey]=useState(''); const [client,setClient]=useState(''); const [status,setStatus]=useState('');
useEffect(()=>{ fetch('/api/settings').then(r=>r.json()).then(j=>{ if(j && j.hasKey) setStatus('Key saved'); }).catch(()=>{}); },[]);
async function save(e){ e.preventDefault(); const res=await fetch('/api/settings',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({key, client})}); const j=await res.json(); if(j.ok) setStatus('Saved'); else setStatus('Error'); }
return (<div><div className='header'><h2>Settings</h2></div><div className='container'><div className='card'><h3>Angel API Settings</h3><form onSubmit={save}><label>Client ID / Mobile</label><input value={client} onChange={e=>setClient(e.target.value)} /><label style={{marginTop:8}}>Angel API Key</label><input value={key} onChange={e=>setKey(e.target.value)} /><div style={{marginTop:8}}><button type='submit'>Save Key</button></div></form><div className='small'>{status}</div></div></div></div>)}
